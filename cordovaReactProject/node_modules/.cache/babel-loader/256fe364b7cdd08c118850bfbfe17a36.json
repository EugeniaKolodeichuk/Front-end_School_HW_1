{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kolod\\\\Desktop\\\\Jane\\\\GoIT\\\\GitHub\\\\Front-end_School_HW_1\\\\cordovaReactProject\\\\src\\\\pages\\\\NewsView\\\\NewsView.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport shortid from 'shortid';\nimport StyledWrap from './StyledNewsView';\nimport Loader from '../../components/Loader/Loader';\nimport { getTrendingFeed } from '../../service/app';\nimport TrendingFeed from '../../components/TrendingFeed/TrendingFeed';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function NewsView() {\n  _s();\n\n  const [trendingFeed, setTrendingFeed] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [fetching, setFetching] = useState(true);\n\n  const scrollHandler = event => {\n    if (event.target.documentElement.scrollHeight - (event.target.documentElement.scrollTop + window.innerHeight) < 100) {\n      setFetching(true);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('scroll', scrollHandler);\n    return function () {\n      document.removeEventListener('scroll', scrollHandler);\n    };\n  }, []);\n  useEffect(() => {\n    try {\n      getTrendingFeed(currentPage).then(data => {\n        setTrendingFeed([...trendingFeed, ...data]);\n        setCurrentPage(previousState => previousState + 1);\n      });\n    } catch (error) {\n      console.error(error);\n    } finally {\n      setFetching(false);\n    }\n  }, [fetching]);\n  return /*#__PURE__*/_jsxDEV(StyledWrap, {\n    children: trendingFeed.length > 0 ? trendingFeed.map(feed => /*#__PURE__*/_jsxDEV(TrendingFeed, {\n      feed: feed\n    }, shortid.generate(), false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 11\n    }, this)) : /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this)\n  }, shortid.generate(), false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n\n_s(NewsView, \"F1kbGsJWxOJDqO0mODuiTn2DCfI=\");\n\n_c = NewsView;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewsView\");","map":{"version":3,"sources":["C:/Users/kolod/Desktop/Jane/GoIT/GitHub/Front-end_School_HW_1/cordovaReactProject/src/pages/NewsView/NewsView.tsx"],"names":["useState","useEffect","shortid","StyledWrap","Loader","getTrendingFeed","TrendingFeed","NewsView","trendingFeed","setTrendingFeed","currentPage","setCurrentPage","fetching","setFetching","scrollHandler","event","target","documentElement","scrollHeight","scrollTop","window","innerHeight","document","addEventListener","removeEventListener","then","data","previousState","error","console","length","map","feed","generate"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,OAAP,MAAoB,SAApB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,SAASC,eAAT,QAAgC,mBAAhC;AACA,OAAOC,YAAP,MAAyB,4CAAzB;;AAGA,eAAe,SAASC,QAAT,GAAoB;AAAA;;AACjC,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCT,QAAQ,CAAkB,EAAlB,CAAhD;AACA,QAAM,CAACU,WAAD,EAAcC,cAAd,IAAgCX,QAAQ,CAAC,CAAD,CAA9C;AACA,QAAM,CAACY,QAAD,EAAWC,WAAX,IAA0Bb,QAAQ,CAAC,IAAD,CAAxC;;AAEA,QAAMc,aAAa,GAAIC,KAAD,IAAsB;AAC1C,QACEA,KAAK,CAACC,MAAN,CAAaC,eAAb,CAA6BC,YAA7B,IACGH,KAAK,CAACC,MAAN,CAAaC,eAAb,CAA6BE,SAA7B,GAAyCC,MAAM,CAACC,WADnD,IAEA,GAHF,EAIE;AACAR,MAAAA,WAAW,CAAC,IAAD,CAAX;AACD;AACF,GARD;;AAUAZ,EAAAA,SAAS,CAAC,MAAM;AACdqB,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,QAA1B,EAAoCT,aAApC;AAEA,WAAO,YAAY;AACjBQ,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,QAA7B,EAAuCV,aAAvC;AACD,KAFD;AAGD,GANQ,EAMN,EANM,CAAT;AAQAb,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI;AACFI,MAAAA,eAAe,CAACK,WAAD,CAAf,CAA6Be,IAA7B,CAAkCC,IAAI,IAAI;AACxCjB,QAAAA,eAAe,CAAC,CAAC,GAAGD,YAAJ,EAAkB,GAAGkB,IAArB,CAAD,CAAf;AACAf,QAAAA,cAAc,CAACgB,aAAa,IAAIA,aAAa,GAAG,CAAlC,CAAd;AACD,OAHD;AAID,KALD,CAKE,OAAOC,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACD,KAPD,SAOU;AACRf,MAAAA,WAAW,CAAC,KAAD,CAAX;AACD;AACF,GAXQ,EAWN,CAACD,QAAD,CAXM,CAAT;AAaA,sBACE,QAAC,UAAD;AAAA,cACGJ,YAAY,CAACsB,MAAb,GAAsB,CAAtB,GACCtB,YAAY,CAACuB,GAAb,CAAiBC,IAAI,iBACnB,QAAC,YAAD;AAAuC,MAAA,IAAI,EAAEA;AAA7C,OAAmB9B,OAAO,CAAC+B,QAAR,EAAnB;AAAA;AAAA;AAAA;AAAA,YADF,CADD,gBAKC,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AANJ,KAAiB/B,OAAO,CAAC+B,QAAR,EAAjB;AAAA;AAAA;AAAA;AAAA,UADF;AAWD;;GA/CuB1B,Q;;KAAAA,Q","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport shortid from 'shortid';\r\nimport StyledWrap from './StyledNewsView';\r\nimport Loader from '../../components/Loader/Loader';\r\nimport { getTrendingFeed } from '../../service/app';\r\nimport TrendingFeed from '../../components/TrendingFeed/TrendingFeed';\r\nimport { ITrendingFeed } from '../../types/feedTypes';\r\n\r\nexport default function NewsView() {\r\n  const [trendingFeed, setTrendingFeed] = useState<ITrendingFeed[]>([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [fetching, setFetching] = useState(true);\r\n\r\n  const scrollHandler = (event: any): void => {\r\n    if (\r\n      event.target.documentElement.scrollHeight -\r\n        (event.target.documentElement.scrollTop + window.innerHeight) <\r\n      100\r\n    ) {\r\n      setFetching(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('scroll', scrollHandler);\r\n\r\n    return function () {\r\n      document.removeEventListener('scroll', scrollHandler);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      getTrendingFeed(currentPage).then(data => {\r\n        setTrendingFeed([...trendingFeed, ...data]);\r\n        setCurrentPage(previousState => previousState + 1);\r\n      });\r\n    } catch (error) {\r\n      console.error(error);\r\n    } finally {\r\n      setFetching(false);\r\n    }\r\n  }, [fetching]);\r\n\r\n  return (\r\n    <StyledWrap key={shortid.generate()}>\r\n      {trendingFeed.length > 0 ? (\r\n        trendingFeed.map(feed => (\r\n          <TrendingFeed key={shortid.generate()} feed={feed} />\r\n        ))\r\n      ) : (\r\n        <Loader />\r\n      )}\r\n    </StyledWrap>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}